<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MakeMate | 메인 화면</title>

    <!-- JS --> <!-- jQuery 를 포함합니다. -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet" href="static/css/mystyles.css">
    <script>

        $(document).ready(function () {
            showLoginState();
        });
        function PostingOpenClose() {
            // id 값 posting-box의 class 중에 is-hidden이 없으면(= 눈에 보이면)
            if ($("#posting-box").hasClass("is-hidden")) {
                // post-box를 숨기고
                $("#posting-box").removeClass("is-hidden");
                // 다시 버튼을 클릭하면, 박스 열기를 할 수 있게 텍스트 바꿔두기
                $("#btn-posting-box").html("분야 추가 닫기");
            } else {
                // 아니면(눈에 보이지 않으면) posting-box를 보이게 변경하고
                $("#posting-box").addClass("is-hidden");
                // 다시 버튼을 클릭하면, 박스 닫기를 할 수 있게 텍스트 바꿔두기
                $("#btn-posting-box").html("분야 추가 열기");
            }
        }

        function logout() {
            let token = localStorage.getItem("access_token");
            $.ajax({
                type: "GET",
                url: "/logout",
                headers: { "Authorization": "Bearer " + token },
                success: function (response) {
                    alert(response["msg"]);
                    localStorage.removeItem("access_token"); // 로컬 저장소에서 토큰 삭제
                    showLoginState();
                }
            })
            //alert("로그아웃 되었습니다.");
            localStorage.removeItem("access_token"); // 로컬 저장소에서 토큰 삭제
            showLoginState();
        }
        function showLoginState() {
            let token = localStorage.getItem("access_token");
            if (!token) {
                window.location.href = '/';
            }

        }

    </script>
</head>

<body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <a class="navbar-item">
                <h1 class="title" onClick="location.href='main.html'">MakeMate</h1>
            </a>
        </div>

        <div class="navbar-end">
            <div class="navbar-item">
                <a class="button is-light" onClick=logout()>
                    로그아웃
                </a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="field is-pulled-right my-5" style="clear:both">
            <div class="control">

                <button class="button is-link" id="btn-posting-box" onClick="PostingOpenClose()">분야 추가 열기</button>
            </div>
            <!--
                <div class="control">
                  <button class="button is-link is-light">분야 추가 닫기</button>
                </div>
            -->
        </div>


        <div class="columns is-centered">
            <form class="box is-hidden" id="posting-box">
                <div class="field">
                    <label class="label">분야 이름</label>
                    <div class="control">
                        <input class="input" type="text" placeholder="이름">
                    </div>
                </div>

                <div class="field">
                    <label class="label">프로필 사진</label>
                    <div class="file is-boxed is-large">
                        <label class="file-label">
                            <input class="file-input" type="file" name="resume">
                            <span class="file-cta">
                                <span class="file-label">
                                    사진 업로드
                                </span>
                            </span>
                        </label>
                    </div>
                </div>

                <button class="button is-primary">추가하기</button>
            </form>


            <div class="field">
                <label class="label">프로필 사진</label>
                <div class="file is-boxed is-large">
                    <label class="file-label">
                        <input class="file-input" type="file" name="resume">
                        <span class="file-cta">
                            <span class="file-label">
                                사진 업로드
                            </span>
                        </span>
                    </label>
                </div>
            </div>

            <button class="button is-primary">추가하기</button>
            </form>
        </div>

        <div class="columns is-multiline is-mobile">
            <div class="column is-one-third">
                <div class="card">
                    <div class="card-image">
                        <figure class="image is-4by3">
                            <button type="button" onClick="location.href='list.html'">
                                <img src="https://bulma.io/images/placeholders/480x480.png" alt="Placeholder image">
                            </button>
                        </figure>
                    </div>
                    <p class="card-header-title is-centered">
                        분야 이름
                    </p>
                </div>
            </div>
            <div class="column is-one-third">
                <div class="card">
                    <div class="card-image">
                        <figure class="image is-4by3">
                            <button type="button" onClick="location.href='list.html'">
                                <img src="https://bulma.io/images/placeholders/480x480.png" alt="Placeholder image">
                            </button>
                        </figure>
                    </div>
                    <p class="card-header-title is-centered">
                        분야 이름
                    </p>
                </div>
            </div>
            <div class="column is-one-third">
                <div class="card">
                    <div class="card-image">
                        <figure class="image is-4by3">
                            <button type="button" onClick="location.href='list.html'">
                                <img src="https://bulma.io/images/placeholders/480x480.png" alt="Placeholder image">
                            </button>
                        </figure>
                    </div>
                    <p class="card-header-title is-centered">
                        분야 이름
                    </p>
                </div>
            </div>
            <div class="column is-one-third">
                <div class="card">
                    <div class="card-image">
                        <figure class="image is-4by3">
                            <button type="button" onClick="location.href='list.html'">
                                <img src="https://bulma.io/images/placeholders/480x480.png" alt="Placeholder image">
                            </button>
                        </figure>
                    </div>
                    <p class="card-header-title is-centered">
                        분야 이름
                    </p>
                </div>
            </div>
            <div class="column is-one-third">
                <div class="card">
                    <div class="card-image">
                        <figure class="image is-4by3">
                            <button type="button" onClick="location.href='list.html'">
                                <img src="https://bulma.io/images/placeholders/480x480.png" alt="Placeholder image">
                            </button>
                        </figure>
                    </div>
                    <p class="card-header-title is-centered">
                        분야 이름
                    </p>
                </div>
            </div>
        </div>
</body>

</html>